# Copy this file to /etc/edgecoder/edgecoder.env and edit values.

# EDGE_RUNTIME_MODE selects which process this machine runs.
# - worker: joins mesh as an agent node (most common for laptops/desktops)
# - ide-provider: runs local IDE provider API on :4304
# - coordinator: runs coordinator service
# - control-plane: runs admin dashboard/API service
# - inference: runs inference service
# - all-in-one: starts coordinator + inference + control-plane demo stack
EDGE_RUNTIME_MODE=worker

# Worker identity and behavior (used when EDGE_RUNTIME_MODE=worker).
# AGENT_ID: unique per machine/node, appears in control-plane catalog.
# If you do not have one yet, sign in at https://portal.edgecoder.io/portal,
# verify email, enroll a node, then use that node id as AGENT_ID.
AGENT_ID=mac-worker-001
# AGENT_OS: one of macos | ubuntu | debian | windows | ios.
AGENT_OS=macos
# AGENT_MODE:
# - swarm-only: node contributes mesh compute only
# - ide-enabled: node contributes mesh compute and is marked IDE-capable
# Note: ide-enabled does not launch the dedicated IDE provider service by itself.
AGENT_MODE=swarm-only
# Runtime flavor label shown in coordinator telemetry/catalog.
# Keep default for normal EdgeCoder workers.
# Use a custom value only for external/alternative runtimes.
# Examples: edgecoder-native | openclaw | claude-local
AGENT_CLIENT_TYPE=edgecoder-native
# REQUIRED for portal-linked production nodes:
# - create node enrollment in portal
# - copy registrationToken here (from portal node enrollment)
AGENT_REGISTRATION_TOKEN=

# Coordinator and auth configuration.
# COORDINATOR_URL should point at your reachable coordinator endpoint.
COORDINATOR_URL=https://coordinator.edgecoder.io
# Mesh auth token for protected coordinator routes.
# In managed enrollment, this can be left blank and auto-provisioned
# by coordinator after successful node registration.
# Get this from coordinator operator/admin.
# If you run your own coordinator, generate one with:
#   openssl rand -hex 32
# and set the same value on coordinator + agents.
MESH_AUTH_TOKEN=
# Optional alias used by some deployments; keep aligned with MESH_AUTH_TOKEN.
COORDINATOR_MESH_TOKEN=

# Model provider configuration.
# LOCAL_MODEL_PROVIDER:
# - edgecoder-local: default built-in provider (recommended if unsure)
# - ollama-local: use local Ollama daemon/models on this machine
# Choose ollama-local only when Ollama is installed/configured.
LOCAL_MODEL_PROVIDER=edgecoder-local
# If true, auto-installs OLLAMA_MODEL when provider is ollama-local.
OLLAMA_AUTO_INSTALL=false
# Ollama model tag to use/pull (if ollama-local).
# Examples: qwen2.5-coder:latest | llama3.1:8b | codellama:13b
OLLAMA_MODEL=qwen2.5-coder:latest
# Ollama host options (if ollama-local):
# - blank: local default (http://127.0.0.1:11434)
# - http://127.0.0.1:11434: explicit local host
# - http://<host-or-ip>:11434: remote/shared Ollama host
OLLAMA_HOST=

# Optional service tuning.
# Max simultaneous coordinator tasks this agent accepts.
# 1 is safest/default. Higher values can improve throughput but
# increase CPU/RAM pressure and may reduce per-task responsiveness.
# Increase gradually only on machines with headroom.
MAX_CONCURRENT_TASKS=1
# Cooldown (milliseconds) between peer-direct offers while idle.
# Lower = more aggressive peer offers and higher mesh chatter.
# Higher = less chatter and slower peer-direct utilization.
# 20000 is a balanced default.
PEER_OFFER_COOLDOWN_MS=20000

# ------------------------------------------------------------
# Common profiles (copy one block into your real env file)
# ------------------------------------------------------------
#
# 1) Standard mesh worker:
# EDGE_RUNTIME_MODE=worker
# AGENT_MODE=swarm-only
#
# 2) Mesh worker + IDE-capable agent:
# EDGE_RUNTIME_MODE=worker
# AGENT_MODE=ide-enabled
#
# 3) Dedicated IDE provider service (separate process):
# EDGE_RUNTIME_MODE=ide-provider
# AGENT_ID=mac-ide-provider-001
# LOCAL_MODEL_PROVIDER=edgecoder-local
#
# If you want both mesh worker and dedicated IDE provider on one machine,
# run two service instances (or one launchd service plus a second manual/system service):
# - Instance A: EDGE_RUNTIME_MODE=worker, AGENT_MODE=ide-enabled
# - Instance B: EDGE_RUNTIME_MODE=ide-provider
